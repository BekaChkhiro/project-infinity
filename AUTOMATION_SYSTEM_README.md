# рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ - рЃърЃарЃЮрЃњрЃарЃћрЃАрЃў

## РюЁ рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃБрЃџрЃў

### 1. рЃЊрЃљрЃбрЃљрЃЉрЃљрЃќрЃўрЃА рЃАрЃЦрЃћрЃЏрЃљ (`supabase-automation-system.sql`)
рЃерЃћрЃЦрЃЏрЃюрЃўрЃџрЃўрЃљ рЃАрЃарЃБрЃџрЃў рЃЏрЃўрЃњрЃарЃљрЃфрЃўрЃљ рЃерЃћрЃЏрЃЊрЃћрЃњрЃў рЃбрЃљрЃЉрЃџрЃћрЃЉрЃўрЃЌ:

#### рЃбрЃљрЃЉрЃџрЃћрЃЉрЃў:
- **notifications** - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ
  - рЃАрЃ«рЃЋрЃљрЃЊрЃљрЃАрЃ«рЃЋрЃљ рЃбрЃўрЃърЃўрЃА рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў (stage_change, project_stuck, payment_received, рЃЊрЃљ рЃљ.рЃе.)
  - рЃарЃћрЃљрЃџ-рЃЊрЃарЃЮрЃерЃў рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ
  - рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃў/рЃгрЃљрЃБрЃЎрЃўрЃЌрЃ«рЃљрЃЋрЃў рЃАрЃбрЃљрЃбрЃБрЃАрЃў

- **email_templates** - рЃћрЃџ. рЃцрЃЮрЃАрЃбрЃўрЃА рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃў
  - рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃў рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў рЃћрЃбрЃљрЃърЃўрЃАрЃЌрЃЋрЃўрЃА
  - рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃў: {client_name}, {project_name}, {stage}, {notes}
  - рЃљрЃЦрЃбрЃўрЃБрЃарЃў/рЃљрЃарЃљрЃљрЃЦрЃбрЃўрЃБрЃарЃў рЃАрЃбрЃљрЃбрЃБрЃАрЃў

- **automation_rules** - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃгрЃћрЃАрЃћрЃЉрЃў
  - Trigger рЃбрЃўрЃърЃћрЃЉрЃў: stage_enter, stage_duration, time_scheduled, рЃЊрЃљ рЃљ.рЃе.
  - Action рЃбрЃўрЃърЃћрЃЉрЃў: send_notification, send_email, create_task, рЃЊрЃљ рЃљ.рЃе.
  - Dry-run рЃарЃћрЃЪрЃўрЃЏрЃў рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА

- **automation_executions** - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃўрЃА рЃўрЃАрЃбрЃЮрЃарЃўрЃљ
  - рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃАрЃљрЃЌрЃЋрЃљрЃџрЃљрЃЋрЃћрЃЉрЃћрЃџрЃў
  - рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃБрЃџрЃў/рЃгрЃљрЃарЃБрЃЏрЃљрЃбрЃћрЃЉрЃћрЃџрЃў рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃћрЃЉрЃў

- **audit_logs** - рЃАрЃарЃБрЃџрЃў рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃџрЃЮрЃњрЃћрЃЉрЃў
  - рЃДрЃЋрЃћрЃџрЃљ рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃўрЃА рЃЌрЃЋрЃљрЃџрЃЌрЃЋрЃљрЃџрЃў
  - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА, рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА, рЃЎрЃџрЃўрЃћрЃюрЃбрЃўрЃА рЃљрЃЦрЃбрЃўрЃЋрЃЮрЃЉрЃћрЃЉрЃў
  - Export рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃў (JSON, CSV)

- **user_preferences** - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃърЃарЃћрЃцрЃћрЃарЃћрЃюрЃАрЃћрЃЉрЃў
  - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
  - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃЕрЃљрЃарЃЌрЃЋрЃљ/рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ
  - Quiet hours рЃЊрЃљ weekend alerts

- **project_alerts** - рЃГрЃЎрЃЋрЃўрЃљрЃюрЃў рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃћрЃЉрЃў
  - Stuck in stage
  - Payment delay
  - Deadline approaching
  - High value projects
  - Multiple projects same client

#### рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў:
- `create_notification()` - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ
- `log_audit_event()` - рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃџрЃЮрЃњрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ
- `detect_stuck_projects()` - рЃњрЃљрЃЕрЃћрЃарЃћрЃЉрЃБрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃФрЃћрЃЉрЃюрЃљ
- `get_unread_notification_count()` - рЃгрЃљрЃБрЃЎрЃўрЃЌрЃ«рЃљрЃЋрЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ

#### рЃбрЃарЃўрЃњрЃћрЃарЃћрЃЉрЃў:
- `trigger_notify_stage_change` - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ рЃћрЃбрЃљрЃърЃўрЃА рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃўрЃАрЃљрЃА

#### Views:
- `automation_dashboard` - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА dashboard-рЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў
- `projects_requiring_action` - рЃърЃарЃЮрЃћрЃЦрЃбрЃћрЃЉрЃў рЃарЃЮрЃЏрЃџрЃћрЃЉрЃўрЃф рЃАрЃљрЃГрЃўрЃарЃЮрЃћрЃЉрЃћрЃю рЃДрЃБрЃарЃљрЃЊрЃдрЃћрЃЉрЃљрЃА

#### рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў:
- 3 рЃћрЃџ. рЃцрЃЮрЃАрЃбрЃўрЃА рЃерЃљрЃЉрЃџрЃЮрЃюрЃў (рЃерЃћрЃ«рЃЋрЃћрЃЊрЃарЃљ, рЃњрЃљрЃЊрЃљрЃ«рЃћрЃЊрЃЋрЃљ, рЃўрЃюрЃЋрЃЮрЃўрЃАрЃў)
- 3 рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџрЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃгрЃћрЃАрЃў

---

### 2. TypeScript рЃбрЃўрЃърЃћрЃЉрЃў (`src/types/database.types.ts`)
рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃБрЃџрЃўрЃљ рЃАрЃарЃБрЃџрЃў рЃбрЃўрЃърЃћрЃЉрЃў рЃДрЃЋрЃћрЃџрЃљ рЃљрЃ«рЃљрЃџрЃў рЃбрЃљрЃЉрЃџрЃўрЃАрЃЌрЃЋрЃўрЃА:
- `Notification`, `EmailTemplate`, `AutomationRule`, `AuditLog`, `UserPreferences`, `ProjectAlert`
- Insert рЃЊрЃљ Update рЃбрЃўрЃърЃћрЃЉрЃў рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃўрЃАрЃЌрЃЋрЃўрЃА
- Extended рЃбрЃўрЃърЃћрЃЉрЃў relations-рЃўрЃЌ:
  - `NotificationWithRelations`
  - `AutomationRuleWithExecutions`
  - `ProjectAlertWithProject`
  - `AuditLogWithUser`

---

### 3. Backend Service Functions

#### `src/lib/supabase/notifications.ts`
- `getNotifications()` - рЃДрЃЋрЃћрЃџрЃљ рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ
- `getUnreadNotifications()` - рЃгрЃљрЃБрЃЎрЃўрЃЌрЃ«рЃљрЃЋрЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў
- `getUnreadCount()` - рЃгрЃљрЃБрЃЎрЃўрЃЌрЃ«рЃљрЃЋрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ
- `createNotification()` - рЃљрЃ«рЃљрЃџрЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ
- `markAsRead()` - рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃљрЃЊ рЃЏрЃЮрЃюрЃўрЃерЃЋрЃюрЃљ
- `markAllAsRead()` - рЃДрЃЋрЃћрЃџрЃљрЃА рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃљрЃЊ рЃЏрЃЮрЃюрЃўрЃерЃЋрЃюрЃљ
- `subscribeToNotifications()` - real-time рЃАрЃБрЃЉрЃАрЃЦрЃарЃўрЃцрЃфрЃўрЃљ
- `unsubscribeFromNotifications()` - рЃњрЃљрЃБрЃЦрЃЏрЃћрЃЉрЃљ

#### `src/lib/supabase/automation.ts`
- **Automation Rules:**
  - `getAutomationRules()` - рЃДрЃЋрЃћрЃџрЃљ рЃгрЃћрЃАрЃў
  - `createAutomationRule()` - рЃљрЃ«рЃљрЃџрЃў рЃгрЃћрЃАрЃў
  - `updateAutomationRule()` - рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ
  - `toggleAutomationRule()` - рЃЕрЃљрЃарЃЌрЃЋрЃљ/рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ
  - `toggleDryRun()` - dry-run рЃарЃћрЃЪрЃўрЃЏрЃў

- **Executions:**
  - `getAutomationExecutions()` - рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃўрЃА рЃўрЃАрЃбрЃЮрЃарЃўрЃљ
  - `getRecentExecutions()` - рЃЉрЃЮрЃџрЃЮ рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃћрЃЉрЃў

- **Project Alerts:**
  - `getActiveAlerts()` - рЃљрЃЦрЃбрЃўрЃБрЃарЃў рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃћрЃЉрЃў
  - `getProjectAlerts()` - рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃћрЃЉрЃў
  - `createProjectAlert()` - рЃљрЃ«рЃљрЃџрЃў рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃљ
  - `resolveAlert()` - рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃўрЃА рЃњрЃљрЃЊрЃљрЃГрЃарЃљ

- **Smart Detection:**
  - `detectStuckProjects()` - рЃњрЃљрЃЕрЃћрЃарЃћрЃЉрЃБрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃћрЃЉрЃў
  - `detectPaymentDelays()` - рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃўрЃА рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃљ
  - `detectHighValueProjects()` - рЃЏрЃљрЃдрЃљрЃџрЃЉрЃўрЃБрЃ»рЃћрЃбрЃўрЃљрЃюрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃћрЃЉрЃў
  - `detectMultipleProjectsClients()` - рЃЏрЃарЃљрЃЋрЃљрЃџрЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃљрЃюрЃў рЃЎрЃџрЃўрЃћрЃюрЃбрЃћрЃЉрЃў
  - `getAutomationDashboard()` - dashboard рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў
  - `getProjectsRequiringAction()` - рЃърЃарЃЮрЃћрЃЦрЃбрЃћрЃЉрЃў рЃарЃЮрЃЏрЃџрЃћрЃЉрЃўрЃф рЃАрЃљрЃГрЃўрЃарЃЮрЃћрЃЉрЃћрЃю рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃљрЃА

#### `src/lib/supabase/email-templates.ts`
- `getEmailTemplates()` - рЃДрЃЋрЃћрЃџрЃљ рЃерЃљрЃЉрЃџрЃЮрЃюрЃў
- `getTemplatesByStage()` - рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃў рЃћрЃбрЃљрЃърЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ
- `createEmailTemplate()` - рЃљрЃ«рЃљрЃџрЃў рЃерЃљрЃЉрЃџрЃЮрЃюрЃў
- `updateEmailTemplate()` - рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ
- `renderTemplate()` - рЃерЃљрЃЉрЃџрЃЮрЃюрЃўрЃА rendering рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃўрЃЌ
- `previewTemplate()` - preview рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃЌ
- `getAvailableVariables()` - рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃў рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃў

#### `src/lib/supabase/audit-logs.ts`
- `getAuditLogs()` - рЃџрЃЮрЃњрЃћрЃЉрЃў рЃцрЃўрЃџрЃбрЃарЃћрЃЉрЃўрЃЌ
- `getProjectAuditLogs()` - рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃџрЃЮрЃњрЃћрЃЉрЃў
- `getClientAuditLogs()` - рЃЎрЃџрЃўрЃћрЃюрЃбрЃўрЃА рЃџрЃЮрЃњрЃћрЃЉрЃў
- `getRecentActivity()` - рЃЉрЃЮрЃџрЃЮ рЃљрЃЦрЃбрЃўрЃЋрЃЮрЃЉрЃљ
- `exportAuditLogs()` - Export JSON-рЃљрЃЊ
- `exportAuditLogsCSV()` - Export CSV-рЃљрЃЊ
- Helper рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў:
  - `logProjectCreated()`
  - `logStageChanged()`
  - `logClientCreated()`

#### `src/lib/supabase/preferences.ts`
- `getUserPreferences()` - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃърЃарЃћрЃцрЃћрЃарЃћрЃюрЃАрЃћрЃЉрЃў
- `updateUserPreferences()` - рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ
- `toggleNotifications()` - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃЕрЃљрЃарЃЌрЃЋрЃљ/рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ
- `toggleEmailNotifications()` - рЃћрЃџ. рЃцрЃЮрЃАрЃбрЃўрЃА рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў
- `toggleAutomation()` - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃљ
- `updateNotificationTypes()` - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃўрЃА рЃбрЃўрЃърЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
- `updateStuckProjectThreshold()` - рЃњрЃљрЃЕрЃћрЃарЃћрЃЉрЃБрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃќрЃдрЃЋрЃљрЃарЃў
- `shouldReceiveNotification()` - рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ
- `isQuietHours()` - quiet hours рЃЊрЃћрЃбрЃћрЃЦрЃфрЃўрЃљ
- `isWeekendAndAlertsDisabled()` - рЃерЃљрЃЉрЃљрЃЌ-рЃЎрЃЋрЃўрЃарЃљ рЃЊрЃћрЃбрЃћрЃЦрЃфрЃўрЃљ

---

### 4. UI рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў

#### `src/components/notifications/notification-center.tsx`
РюЁ рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃфрЃћрЃюрЃбрЃарЃў header-рЃўрЃАрЃЌрЃЋрЃўрЃА:
- рЃгрЃљрЃБрЃЎрЃўрЃЌрЃ«рЃљрЃЋрЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ
- Dropdown рЃЏрЃћрЃюрЃўрЃБ рЃЉрЃЮрЃџрЃЮ 10 рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃўрЃЌ
- Real-time рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃћрЃЉрЃў
- рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃљрЃЊ рЃЏрЃЮрЃюрЃўрЃерЃЋрЃюрЃљ
- "рЃДрЃЋрЃћрЃџрЃљрЃА рЃгрЃљрЃерЃџрЃљ" рЃдрЃўрЃџрЃљрЃЎрЃў
- рЃџрЃўрЃюрЃЎрЃў рЃАрЃарЃБрЃџ notifications рЃњрЃЋрЃћрЃарЃЊрЃќрЃћ

---

## ­ЪЊІ рЃарЃљ рЃЊрЃљрЃарЃЕрЃљ рЃАрЃљрЃЎрЃћрЃЌрЃћрЃЉрЃћрЃџрЃў

### 1. UI рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў

#### рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў:
- [ ] `src/app/dashboard/notifications/page.tsx` - рЃАрЃарЃБрЃџрЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃњрЃЋрЃћрЃарЃЊрЃў
  - рЃДрЃЋрЃћрЃџрЃљ рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ
  - рЃцрЃўрЃџрЃбрЃарЃћрЃЉрЃў (рЃбрЃўрЃърЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ, рЃЌрЃљрЃарЃўрЃдрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ)
  - рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃў/рЃгрЃљрЃБрЃЎрЃўрЃЌрЃ«рЃљрЃЋрЃў рЃЊрЃљрЃ»рЃњрЃБрЃцрЃћрЃЉрЃљ
  - Pagination

#### рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃгрЃћрЃАрЃћрЃЉрЃў:
- [ ] `src/app/dashboard/automation/page.tsx` - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃњрЃЋрЃћрЃарЃЊрЃў
- [ ] `src/components/automation/rules-list.tsx` - рЃгрЃћрЃАрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ
- [ ] `src/components/automation/rule-creator.tsx` - рЃгрЃћрЃАрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЦрЃЏрЃюрЃћрЃџрЃў
  - IF-THEN рЃџрЃЮрЃњрЃўрЃЎрЃўрЃА builder
  - Trigger рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
  - Action рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
  - Dry-run рЃарЃћрЃЪрЃўрЃЏрЃў
- [ ] `src/components/automation/rule-execution-history.tsx` - рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃўрЃА рЃўрЃАрЃбрЃЮрЃарЃўрЃљ

#### рЃћрЃџ. рЃцрЃЮрЃАрЃбрЃўрЃА рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃў:
- [ ] `src/app/dashboard/email-templates/page.tsx` - рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃўрЃА рЃњрЃЋрЃћрЃарЃЊрЃў
- [ ] `src/components/email/template-editor.tsx` - рЃерЃљрЃЉрЃџрЃЮрЃюрЃўрЃА рЃарЃћрЃЊрЃљрЃЦрЃбрЃЮрЃарЃў
  - WYSIWYG рЃћрЃЊрЃўрЃбрЃЮрЃарЃў рЃљрЃю Markdown
  - рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃўрЃА drag-and-drop
  - Preview
- [ ] `src/components/email/template-preview.tsx` - Preview рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃў

#### рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃџрЃЮрЃњрЃћрЃЉрЃў:
- [ ] `src/app/dashboard/audit/page.tsx` - рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃњрЃЋрЃћрЃарЃЊрЃў
  - рЃАрЃарЃБрЃџрЃў рЃџрЃЮрЃњрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ
  - рЃЏрЃарЃљрЃЋрЃљрЃџрЃцрЃБрЃюрЃЦрЃфрЃўрЃБрЃарЃў рЃцрЃўрЃџрЃбрЃарЃћрЃЉрЃў:
    - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ
    - рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ
    - рЃЌрЃљрЃарЃўрЃдрЃўрЃА рЃЊрЃўрЃљрЃърЃљрЃќрЃЮрЃюрЃўрЃЌ
    - рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃўрЃА рЃбрЃўрЃърЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ
  - Export рЃдрЃўрЃџрЃљрЃЎрЃћрЃЉрЃў (JSON, CSV)
  - Pagination

#### рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃћрЃЉрЃў:
- [ ] `src/components/alerts/alerts-panel.tsx` - рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃћрЃЉрЃўрЃА рЃърЃљрЃюрЃћрЃџрЃў
- [ ] `src/components/alerts/alert-card.tsx` - рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃўрЃА рЃЉрЃљрЃарЃљрЃЌрЃў
- [ ] `src/components/alerts/stuck-projects-widget.tsx` - рЃњрЃљрЃЕрЃћрЃарЃћрЃЉрЃБрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃћрЃЉрЃўрЃА рЃЋрЃўрЃ»рЃћрЃбрЃў
- [ ] `src/components/alerts/payment-delays-widget.tsx` - рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃўрЃА рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃўрЃА рЃЋрЃўрЃ»рЃћрЃбрЃў

#### Dashboard рЃЋрЃўрЃ»рЃћрЃбрЃћрЃЉрЃў:
- [ ] `src/components/dashboard/automation-stats-widget.tsx` - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃљ
- [ ] `src/components/dashboard/upcoming-deadlines-widget.tsx` - рЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃЋрЃљрЃЊрЃћрЃЉрЃў
- [ ] `src/components/dashboard/required-actions-widget.tsx` - рЃАрЃљрЃГрЃўрЃарЃЮ рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃћрЃЉрЃў

#### рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:
- [ ] `src/app/dashboard/settings/notifications/page.tsx` - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў
  - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃЕрЃљрЃарЃЌрЃЋрЃљ/рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ
  - рЃћрЃџ. рЃцрЃЮрЃАрЃбрЃўрЃА рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў
  - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃљ
  - Notification рЃбрЃўрЃърЃћрЃЉрЃўрЃА рЃљрЃарЃЕрЃћрЃЋрЃљ
  - Quiet hours
  - Weekend alerts

---

### 2. рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ

#### Header-рЃерЃў NotificationCenter рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ:
```tsx
// src/components/layout/header.tsx-рЃерЃў рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћ
import { NotificationCenter } from '@/components/notifications/notification-center';

// Header рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃерЃў:
<NotificationCenter userId={user.id} />
```

#### Dashboard-рЃерЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃЋрЃўрЃ»рЃћрЃбрЃћрЃЉрЃў:
- рЃЏрЃЌрЃљрЃЋрЃљрЃа рЃњрЃЋрЃћрЃарЃЊрЃќрЃћ рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћ widgets рЃљрЃ«рЃљрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃўрЃАрЃЌрЃЋрЃўрЃА

#### Sidebar-рЃерЃў рЃљрЃ«рЃљрЃџрЃў рЃЏрЃћрЃюрЃўрЃБрЃћрЃЉрЃў:
```tsx
{ name: 'рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў', href: '/dashboard/notifications', icon: Bell },
{ name: 'рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃљ', href: '/dashboard/automation', icon: Zap },
{ name: 'рЃћрЃџ. рЃцрЃЮрЃАрЃбрЃўрЃА рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃў', href: '/dashboard/email-templates', icon: Mail },
{ name: 'рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃџрЃЮрЃњрЃћрЃЉрЃў', href: '/dashboard/audit', icon: FileText },
```

---

### 3. Migration-рЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ

рЃарЃЮрЃфрЃљ рЃЏрЃќрЃљрЃЊ рЃўрЃЦрЃюрЃћрЃЉрЃў backend-рЃўрЃА рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА:

```bash
# Supabase-рЃерЃў рЃерЃћрЃЊрЃў рЃЊрЃљ рЃњрЃљрЃБрЃерЃЋрЃў:
psql -h your-project.supabase.co -U postgres -d postgres -f supabase-automation-system.sql
```

рЃљрЃю Supabase Dashboard-рЃерЃў:
1. SQL Editor-рЃерЃў рЃњрЃљрЃ«рЃАрЃћрЃюрЃў
2. `supabase-automation-system.sql` рЃцрЃљрЃўрЃџрЃўрЃА рЃерЃўрЃњрЃЌрЃљрЃЋрЃАрЃў рЃЕрЃљрЃЎрЃЮрЃърЃўрЃарЃћ
3. Run рЃњрЃљрЃљрЃЎрЃћрЃЌрЃћ

---

### 4. рЃерЃћрЃЏрЃЊрЃћрЃњрЃў рЃюрЃљрЃЉрЃўрЃ»рЃћрЃЉрЃў (рЃърЃарЃўрЃЮрЃарЃўрЃбрЃћрЃбрЃўрЃЌ)

1. **Migration-рЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ** - рЃЊрЃљрЃбрЃљрЃЉрЃљрЃќрЃўрЃА рЃАрЃЦрЃћрЃЏрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ
2. **NotificationCenter header-рЃерЃў** - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃЏрЃљ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃЮрЃю рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў
3. **Notifications рЃњрЃЋрЃћрЃарЃЊрЃў** - рЃАрЃарЃБрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃў
4. **Dashboard рЃЋрЃўрЃ»рЃћрЃбрЃћрЃЉрЃў** - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА insights
5. **Automation Rules рЃњрЃЋрЃћрЃарЃЊрЃў** - рЃгрЃћрЃАрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ
6. **Email Templates** - рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ
7. **Audit Log** - рЃАрЃарЃБрЃџрЃў рЃљрЃБрЃЊрЃўрЃбрЃў
8. **Settings** - рЃърЃарЃћрЃцрЃћрЃарЃћрЃюрЃАрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ

---

## ­Ъј» рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃў рЃарЃљрЃф рЃБрЃЎрЃЋрЃћ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА

рЃЌрЃБ migration-рЃА рЃњрЃљрЃБрЃерЃЋрЃћрЃЉ:
- РюЁ рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ stage рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃўрЃАрЃљрЃА
- РюЁ Real-time рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў NotificationCenter-рЃерЃў
- РюЁ рЃњрЃљрЃЕрЃћрЃарЃћрЃЉрЃБрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃћрЃЉрЃўрЃА рЃЊрЃћрЃбрЃћрЃЦрЃфрЃўрЃљ
- РюЁ рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃџрЃЮрЃњрЃћрЃЉрЃўрЃА рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ
- РюЁ Backend рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў рЃДрЃЋрЃћрЃџрЃљ рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃўрЃАрЃЌрЃЋрЃўрЃА

---

## ­ЪЊЮ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃў

### рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ:
```typescript
import { createNotification } from '@/lib/supabase/notifications';

await createNotification({
  user_id: userId,
  type: 'project_stuck',
  title: 'рЃърЃарЃЮрЃћрЃЦрЃбрЃў рЃњрЃљрЃЕрЃћрЃарЃћрЃЉрЃБрЃџрЃўрЃљ',
  message: 'рЃърЃарЃЮрЃћрЃЦрЃбрЃў "рЃЋрЃћрЃЉрЃАрЃљрЃўрЃбрЃўрЃА рЃЊрЃўрЃќрЃљрЃўрЃюрЃў" 7 рЃЊрЃдрЃћрЃќрЃћ рЃЏрЃћрЃбрЃўрЃљ рЃўрЃЏрЃљрЃЋрЃћ рЃћрЃбрЃљрЃърЃќрЃћ',
  related_project_id: projectId,
});
```

### рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃгрЃћрЃАрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ:
```typescript
import { createAutomationRule } from '@/lib/supabase/automation';

await createAutomationRule({
  name: '3 рЃЊрЃдрЃўрЃљрЃюрЃў рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃљ',
  trigger_type: 'stage_duration',
  trigger_config: { threshold_days: 3 },
  action_type: 'send_notification',
  action_config: {
    title: 'рЃърЃарЃЮрЃћрЃЦрЃбрЃў 3 рЃЊрЃдрЃћрЃљ рЃћрЃарЃЌ рЃћрЃбрЃљрЃърЃќрЃћ',
    message: 'рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ рЃърЃарЃЮрЃћрЃЦрЃбрЃў',
  },
  is_active: true,
  dry_run: true, // рЃ»рЃћрЃа test рЃарЃћрЃЪрЃўрЃЏрЃерЃў
  created_by: userId,
});
```

### рЃњрЃљрЃЕрЃћрЃарЃћрЃЉрЃБрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃФрЃћрЃЉрЃюрЃљ:
```typescript
import { detectStuckProjects } from '@/lib/supabase/automation';

const stuckProjects = await detectStuckProjects(7); // 7+ рЃЊрЃдрЃћ
```

---

рЃЏрЃќрЃљрЃЊ рЃЋрЃљрЃа рЃњрЃљрЃЋрЃљрЃњрЃарЃФрЃћрЃџрЃЮ рЃЊрЃљ рЃЊрЃљрЃЋрЃљрЃАрЃарЃБрЃџрЃЮ рЃЊрЃљрЃюрЃљрЃарЃЕрЃћрЃюрЃў рЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃў! рЃарЃЮрЃЏрЃћрЃџ рЃюрЃљрЃгрЃўрЃџрЃА рЃњрЃюрЃћрЃЉрЃљрЃЋрЃЌ рЃарЃЮрЃЏ рЃ»рЃћрЃа рЃЊрЃљрЃЋрЃљрЃАрЃарЃБрЃџрЃЮ?
